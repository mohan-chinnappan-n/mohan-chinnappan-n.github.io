<!DOCTYPE html>
<html lang="en" ng-app="app" ng-controller="MainCtrl">

<head>
  <meta charset="UTF-8">
  <title>{{appName}}</title>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="../css/navbar-green.css">
  <script src="../js/angular.min.js"></script>
  <script src="../js/data-markdown.user.js"></script>


  <script src="../bower_components/marked/marked.min.js"></script>
  <script src="../bower_components/angular-marked/dist/angular-marked.js"></script>

  <link rel="stylesheet" href="../reveal.js/css/reveal.css">
  <link rel="stylesheet" href="../reveal.js/css/theme/white.css" id="theme">

  <!-- Code syntax highlighting -->
  <link rel="stylesheet" href="../reveal.js/lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? '../reveal.js/css/print/pdf.css' : '../reveal.js/css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>

  <!--[if lt IE 9]>
    		<script src="../reveal.js/lib/js/html5shiv.js"></script>
    		<![endif]-->

  <style>
    .reveal .slide-number {
      font-size: 0.5em;
    }

    .simg {
      border-radius: 10px;
      border: 1px;
    }

    .reveal section ul li,
    .reveal section p {
      font-size: .8em !important;
    }

    .reveal section pre code {
      font-size: 0.7em !important;
    }
  </style>


</head>

<body>


  <nav class="navbar navbar-default" role="navigation">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="javascript:void(0)">{{appName}}</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#/home">Home</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li ><a href="/">Main</a></li>
      </ul>

      <div class="inner-addon right-addon navbar-form navbar-right">
        <i class="glyphicon glyphicon-search"></i>
        <input type="text" class="form-control" placeholder="Search" />
      </div>

      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown ">
          <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Help <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="./help.html">Help Topics</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <!-- /.navbar-collapse -->
  </nav>
  <!--
  <div class="container" ng-controller='MainCtrl'>
    <div marked src="'pevents.md'"></div>
  </div>
-->


  <div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

      <section id="home">
        <h4>{{appName}}</h4>
        <ul>
          <li>Salesforce Analytics Query Language (SAQL) used to access data in Analytics Cloud datasets</li>
          <li>Used in lenses, dashboards, and explorer to gather data for visualizations. </li>
        </ul>
       </section>

       <section>
         <h4>Video: SAQL Basics</h4>
           <iframe height="450" width="800" data-src="https://www.youtube.com/embed/NQd8bNpY5xA?autoplay=0"></iframe>
       </section>


       <section>
         <h4>Enable SAQL Logs in the Chrome Browser </h4>

         <img style="border:0px;" height="500" src="https://developer.salesforce.com/docs/resources/img/en-us/212.0?doc_id=help%2Fimages%2Fwave_saql_overview_browserlog.png&folder=bi_dev_guide_saql" alt="">
       </section>

       <section>
         <h4>Expression Involving Booleans </h4>
         <ul>
           <li>
             <img style="border:0px;" height="400" src="img/saql/ea-enable-logs.png" alt="">
           </li>
           <li>Note: "true" value for the boolean
           </li>
         </ul>

       </section>

       <section>
         <h4 style="font-size:32px;">Effects of Editing SQL in a Lens</h4>
         <ul style="font-size:30px;">
           <li>
             <img style="border:0px;" height="450" src="img/saql/effect-of-editing-saql-1.gif" alt="">
           </li>
           <li>Note: Editing the SAQL results :<br/>
             Filters cannot be visually displayed because of the advanced editing in SAQL
           </li>
         </ul>

       </section>

       <section>
         <h4 style="font-size:32px;">Special Characters</h4>
         <ul style="font-size:30px;">
           <li>
             <img style="border:0px;" height="520" src="img/saql/saql-spl-chars.png" alt="">
           </li>
         </ul>
       </section>



       <section>
         <h4>Best Practices</h4>
         <ul style="font-size:35px;">
           <li>After loading the dataset: <code>result = load dataset;</code>
           apply filter to the dataset you will be working down the line, this way, we will be dealing with filtered records :
         <code>
           result = filter rows by predicate;
         </code> </li>
         <li>Example:
           <pre>
           <code>
q = load "DTC_Opportunity_SAMPLE";
q = filter q by 'Closed' == "true";

           </code>
         </pre>
       </li>
       <li>Filter before the projection and filter after projection (post-projection filter)</li>
         </ul>
       </section>

       <section>
         <h4>Pre-projection filters - AND and OR</h4>
         <div class="row">
           <div class="col-lg-6">
                 <img style="border:0px;"  src="img/saql/saql-AND-filter.png" alt="">
           </div>
           <div class="col-lg-6">
                 <img style="border:0px;"  src="img/saql/saql-OR-filter.png" alt="">
           </div>

         </div>
       </section>


       <section>
         <h4>Editing a Column - adding Calculated Column</h4>
            <img style="border:0px;" height="450" src="img/saql/saql-calculated-col-1.gif" alt="">

       </section>

       <section>
         <h4>Editing a Column - adding Calculated Column - contd.</h4>
            <img style="border:0px;" height="450" src="img/saql/saql-calculated-col-2.png" alt="">

       </section>


       <section>
         <h4>Video: SAQL Advanced Filters </h4>
           <iframe height="450" width="800" data-src="https://www.youtube.com/embed/X5HBLxvgGf0?autoplay=0"></iframe>
       </section>


       <section>
         <h4>Post-projection filters </h4>
         <div class="row">
           <div class="col-lg-12">
                 <img style="border:0px;"  src="img/saql/sql-post-projection-filter-1.png" alt="">
           </div>

         </div>
       </section>

       <section>
         <h4>coalesce</h4>

         <div class="row">
           <div class="col-lg-12">
                 <img style="border:0px;"  src="img/saql/saql-coalesce-1.png" alt="">
           </div>

         </div>
       </section>


       <section>
         <h4>Video: SAQL Coalesce  </h4>
           <iframe height="450" width="800" data-src="https://www.youtube.com/embed/8VDLy6DbrXg?autoplay=0"></iframe>
       </section>

       <section>
         <h4>Union</h4>
         <ul style="font-size:40px;">
           <li>Combines multiple result sets into one result set. </li>
           <li>
             <pre>
             <code>
q = load "opportunity";
q = group q by ('Account.AccountSource', 'Account.BillingCountry');
q = foreach q generate 'Account.AccountSource' as 'Account.AccountSource',
    'Account.BillingCountry' as 'Account.BillingCountry', sum('Amount') as 'sum_Amount';
q = order q by ('Account.AccountSource' asc, 'Account.BillingCountry' asc);

r = load "opportunity";
r = group r by (  'Account.BillingCountry');
r = foreach r generate "Total" as 'Account.AccountSource','Account.BillingCountry',
    sum('Amount') as 'sum_Amount';

-- union  q and r

s = union q,r;
s = group s by ('Account.AccountSource' , 'Account.BillingCountry' );
s = foreach s generate 'Account.AccountSource','Account.BillingCountry',sum('sum_Amount') as 'sum_Amount'
             </code>
           </pre>
           </li>
         </ul>
       </section>

       <section>
         <h4>Video: SAQL Union  </h4>
           <iframe height="450" width="800" data-src="https://www.youtube.com/embed/GdRUGtLNEcA?autoplay=0"></iframe>
       </section>

       <section>
         <h4>CoGroup</h4>
         <ul style="font-size:35px;">
           <li>
             <b>Cogrouping</b> means that two input streams,
                called <b>left and right</b> are grouped independently and arranged side by side
                . Only data that <b>exists in both groups appears</b> in the results.
                <br/>
                Example:
                <pre>
                  <code>
    z = cogroup x by (day,origin), y by (day,airport);
    -- You can’t have the same stream on both sides of a cogroup operation.
    -- To perform a cogroup operation on one dataset,
    --  load the same dataset twice so you have two streams.
    a = load "opportunity";
    b = load "opportunity";
    b = cogroup a by ClosedDate, b by CreatedDate;
    c = foreach b generate sum(a.Amount) as Amount
                  </code>
                </pre>
           </li>
         </ul>
       </section>


       <section>
         <h4>Video: SAQL cogroup  </h4>
           <iframe height="450" width="800" data-src="https://www.youtube.com/embed/JZi77pQnEIA?autoplay=0"></iframe>
       </section>


       <section>
         <h4>Create Calculated Columns Using the Compare Table </h4>
         <ul style="font-size:30px;">
           <li>Use the Compare Table to define :
             <b>custom formulas with columns of data</b>.
             View measures side by side, and perform math across the table’s columns and rows.</li>
             <li>  <img style="border:0px;" height="450" src="img/saql/saql-calculated-col-1.gif" alt="">
</li>
         </ul>
       </section>

       <section>
         <h4>Windowing Functions </h4>
         <ul style="font-size:30px;">
           <li>To calculate common business cases such as:
               <ul>
                 <li>percent of grand total</li>
                 <li> moving average</li>
                 <li> year and quarter growth</li>
                 <li>ranking</li>
               </ul>
             </li>
             <li>Allows  to calculate data for a single group using aggregated data from adjacent groups</li>
             <li>Aggregates across groups rather than within groups and accepts any valid numerical projection on which to aggregate.</li>
             <li>Windowing functionality is enabled only for grouped queries</li>

               <pre>
                 <code>
q = load "dataset";
q = group q by (OrderDate_Year, OrderDate_Quarter);
q = foreach q generate OrderDate_Year as Year, OrderDate_Quarter as Quarter,
          sum(Sales) as sum_amt,
          sum(sum(Sales)) over([.. 0] partition by all order by (OrderDate_Year, OrderDate_Quarter)) as r_sum;
                 </code>
               </pre>
             </li>
         </ul>
       </section>


       <section>
         <h4>Windowing Functions - Contd.</h4>
         <ul style="font-size:35px;">
           <li>Aggregate functions that supports windowing:
               <ul>
                <li> avg, sum, min, max, count, median</li>
                <li>percentile_disc, and percentile_cont</li>
               </ul>
           </li>

           <li> Ranking Function: Returns a rank value for each row in a partition. Rank functions supported:
             <ul>
               <li>
                 <ul>

               <li><b>rank()</b>: Assigns rank based on order. Repeats rank when the value is the same, and skips as many on the next non-match.</li>
               <li><b>dense_rank()</b>: Same as rank() but doesn’t skip values on previous repetitions.</li>
               <li><b>cume_dist()</b>: Calculates the cumulative distribution (relative position) of the data in the reset group.</li>
               <li><b>row_number()</b>: Assigns a number incremented by 1 for every row in the reset group.</li>

                 </ul>

               </li>
             </ul>

            </li>

         </ul>
       </section>


       <section>
         <h4>Video: SAQL compare table  </h4>
           <iframe height="450" width="800" data-src="https://www.youtube.com/embed/VQSsVru2-lQ?autoplay=0"></iframe>
       </section>



       <section>
         <h4>References</h4>
         <ul>
           <li>
             <a href="https://developer.salesforce.com/docs/atlas.en-us.bi_dev_guide_eql.meta/bi_dev_guide_eql/bi_eql_intro.htm">
               Analytics Cloud SAQL Reference

             </a>
           </li>
         </ul>
       </section>


    </div>
  </div>



  <script src="../reveal.js/lib/js/head.min.js"></script>
  <script src="../reveal.js/js/reveal.js"></script>


  <script>
    'use strict';


    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({

      //width: 960,
      //	height: 700,

      // Display presentation control arrows
      controls: true,

      // Help the user learn the controls by providing hints, for example by
      // bouncing the down arrow when they first encounter a vertical slide
      controlsTutorial: true,

      // Determines where controls appear, "edges" or "bottom-right"
      controlsLayout: 'edges',

      // Visibility rule for backwards navigation arrows; "faded", "hidden"
      // or "visible"
      controlsBackArrows: 'faded',
      // Display a presentation progress bar
      progress: true,

      // Set default timing of 2 minutes per slide
      defaultTiming: 120,

      // Enable keyboard shortcuts for navigation
      keyboard: true,


      history: true,
      center: true,
      slideNumber: true,

      embedded: true,

      transition: 'convex', // none/fade/slide/convex/concave/zoom

      menu: {
        markers: true,
        openSlideNumber: true,
        themes: [{
            name: 'Black',
            theme: '../reveal.js/css/theme/black.css'
          },
          {
            name: 'White',
            theme: '../reveal.js/css/theme/white.css'
          },
          {
            name: 'League',
            theme: '../reveal.js/css/theme/league.css'
          },
          {
            name: 'Sky',
            theme: '../reveal.js/css/theme/sky.css'
          },
          {
            name: 'Beige',
            theme: '../reveal.js/css/theme/beige.css'
          },
          {
            name: 'Simple',
            theme: '../reveal.js/css/theme/simple.css'
          },
          {
            name: 'Serif',
            theme: '../reveal.js/css/theme/serif.css'
          },
          {
            name: 'Blood',
            theme: '../reveal.js/css/theme/blood.css'
          },
          {
            name: 'Night',
            theme: '../reveal.js/css/theme/night.css'
          },
          {
            name: 'Moon',
            theme: '../reveal.js/css/theme/moon.css'
          },
          {
            name: 'Solarized',
            theme: '../reveal.js/css/theme/solarized.css'
          }
        ],
        custom: []
      },

      // Optional reveal.js plugins
      dependencies: [{
          src: '../reveal.js/lib/js/classList.js',
          condition: function() {
            return !document.body.classList;
          }
        },
        {
          src: '../reveal.js/plugin/markdown/marked.js',
          condition: function() {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: '../reveal.js/plugin/markdown/markdown.js',
          condition: function() {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: '../reveal.js/plugin/highlight/highlight.js',
          async: true,
          condition: function() {
            return !!document.querySelector('pre code');
          },
          callback: function() {
            hljs.initHighlightingOnLoad();
          }
        },
        {
          src: '../reveal.js/plugin/zoom-js/zoom.js',
          async: true
        },
        {
          src: '../reveal.js/plugin/notes/notes.js',
          async: true
        },
        {
          src: '../reveal.js/plugin/reveal.js-menu/menu.js',
          async: true
        }
      ]
    });



    var app = angular.module('app', [
      'hc.marked'
    ]);
    app.config(['markedProvider', function(markedProvider) {
      markedProvider.setOptions({
        gfm: true
      });
    }]);

    var GSCOPE;
    app.controller('MainCtrl', function($scope, $http, $timeout) {
      GSCOPE = $scope; // debugging purposes
      $scope.appName="SAQL";



    })
  </script>
</body>

</html>
