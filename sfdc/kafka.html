<!DOCTYPE html>
<html lang="en" ng-app="app" ng-controller="MainCtrl">

<head>
  <meta charset="UTF-8">
  <title>{{appName}}</title>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="../css/navbar-green.css">
  <script src="../js/angular.min.js"></script>
  <script src="../js/data-markdown.user.js"></script>


  <script src="../bower_components/marked/marked.min.js"></script>
  <script src="../bower_components/angular-marked/dist/angular-marked.js"></script>

  <link rel="stylesheet" href="../reveal.js/css/reveal.css">
  <link rel="stylesheet" href="../reveal.js/css/theme/white.css" id="theme">

  <!-- Code syntax highlighting -->
  <link rel="stylesheet" href="../reveal.js/lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? '../reveal.js/css/print/pdf.css' : '../reveal.js/css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>

  <!--[if lt IE 9]>
    		<script src="../reveal.js/lib/js/html5shiv.js"></script>
    		<![endif]-->

  <style>
    .reveal .slide-number {
      font-size: 0.5em;
    }

    .simg {
      border-radius: 10px;
      border: 1px;
    }

    .reveal section ul li,
    .reveal section p {
      font-size: .8em !important;
    }

    .reveal section pre code {
      font-size: 0.7em !important;
    }
  </style>


</head>

<body>


  <nav class="navbar navbar-default" role="navigation">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="javascript:void(0)">{{appName}}</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="javascript:void(0)">Home</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li ><a href="../index.html">Main</a></li>
      </ul>

      <div class="inner-addon right-addon navbar-form navbar-right">
        <i class="glyphicon glyphicon-search"></i>
        <input type="text" class="form-control" placeholder="Search" />
      </div>

      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown ">
          <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Help <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="./help.html">Help Topics</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <!-- /.navbar-collapse -->
  </nav>
  <!--
  <div class="container" ng-controller='MainCtrl'>
    <div marked src="'pevents.md'"></div>
  </div>
-->


  <div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

      <section id="home">
        <h4> {{appName}}</h4>
        <p>Gift from folks at LinkedIn </p>
        <ul>
          <li>Messaging System </li>
          <li>Storage System</li>
          <li>Stream Processing System</li>
        </ul>
       </section>

       <section>
         <h4>Architecture</h4>
         <div class="row">
           <div class="col-lg-6">
              <img height="200" style="border:0px;" src="img/kafka/kafka-arch-1.png" alt="kafka arch">

           </div>
              <div class="col-lg-6">
         <ul style="font-size:30px;">
           <li>Best of two models: queuing and publish-subscribe </li>
           <li><b>Strength of queuing</b> : allowing to <b>divide up</b> the processing of data over multiple consumer instances to scale the processing </li>
           <li><b>Weakness of queuing</b> : Not a multi-subscriber. Once one process/consumer reads the data it's gone!<hr/></li>
           <li><b>Strength of pub-sub</b>:  Allows to broadcast data to multiple processes</li>
           <li><b>Weakness of pub-sub</b>: Has no way of scaling processing: Every message goes to every subscriber</li>
       </ul>
     </div>
</div>
       </section>

       <section>
         <h4>Best of both worlds</h4>
         <div class="row">
           <div class="col-lg-6">
              <img height="200" style="border:0px;" src="img/kafka/kafka-arch-1.png" alt="kafka arch">
              <ul style="font-size:30px;">
                <li>Consumer Groups</li>
                <li>Partitions</li>
              </ul>

           </div>
              <div class="col-lg-6">
                <ul style="font-size:30px;">
                  <li>The consumer group concept in Kafka helps to acheive this</li>
                  <li>As in <b>queuing</b>:  consumer group feature allows to <b>divide up</b> processing over a collection of processes :  members of the consumer group</li>
                  <li>As in <b>pub-sub</b>: Kafka broadcasts messages to multiple consumer groups<hr/></li>
                  <li>With this, Kafka can scale processing and also supports multi-subscriber</li>
                  <li>Supports parallel consumption with the <b>Partitions</b></li>
                </ul>
              </div>
         </div>

       </section>

       <section>
         <h4> Parallel consumption</h4>
         <div class='row'>
           <div class='col-lg-6'>
             <img style="border:0px;" height="250" src="img/kafka/kafka-arch-1.png" alt="log anatomy">
           </div>
           <div class='col-lg-6'>
             <img  style="border:0px;" height="250" src="img/kafka/log_anatomy.png" alt="log anatomy">
           </div>
        </div>

         <ul style="font-size:30px;">
          <li>Assigning the partitions in the topic to the consumers in the consumer group </li>
          <li>So each partition is consumed by <b>exactly one consumer</b> in the consumer group. </li>
          <li>Number of consumer instances in a consumer group  = Number of partitions </li>
         </ul>
       </section>

       <section>
         <h4>Storage System</h4>
         <ul style="font-size:30px;">
           <li>Data written to Kafka is written to disk and replicated for fault-tolerance</li>
           <li>Producers to wait on acknowledgement so that a write isn't considered complete until it is fully replicated</li>
           <li>Special purpose distributed filesystem dedicated to:
               <table class='table table-bordered'>
                 <tr><th>high-performance</th>
                   <th>low-latency commit log storage</th>
                   <th>replication</th>
                   <th>propagation</th>
                </tr></table>
              </li>
         </ul>
       </section>

       <section>
         <h4>Stream Processing</h4>
         <ul style="font-size:30px;">
           <li>Takes continual streams of data from input topics</li>
           <li> Performs some processing on this input</li>
           <li> Produces continual streams of data to output topics<hr/></li>
           <li> Example: retail application takes in <b>input</b> streams of sales and shipments
             and <b>output</b> a stream of reorder and price adjustments computed off this data<hr/></li>
           <li> Uses the producer and consumer APIs for input</li>
           <li> Has stateful storage</li>
           <li> Uses the consumer group mechanism for fault tolerance among the stream processor instances</li>


        </ul>

       </section>

       <section>
         <h4>Stream Processing  - past and future data</h4>
        <img height="200" style="border:0px" src="img/kafka/kafka-apis.png" alt="">
         <ul style="font-size:30px;">
           <li> Enterprise messaging system allows processing <b>future</b> messages that will arrive after you subscribe</li>
           <li>A distributed file system like HDFS allows storing static files for <b>batch processing</b> -
              Allows storing and processing historical data from the past</li>
           <li> With Kafka by combining storage and low-latency subscriptions, streaming applications can treat both<b> past and future data</b>
              the same way </li>
        </ul>

       </section>

       <section>
         <h4>Kafka uses Apache ZooKeeper</h4>
           <p>ZooKeeper is Centralized service for maintaining: </p>
           <ul style="font-size:30px;">
             <li>Configuration information</li>
             <li>Naming</li>
             <li>Providing distributed synchronization and group services</li>

           </ul>
        </section>

        <section>
           <h4 style="font-size:30px;">Video: Apache Kafka and the Stream Data Platform - Jay Kreps - team built Kafka </h4>
             <iframe height="450" width="800" data-src="https://www.youtube.com/embed/o-952-TxDDE?autoplay=0"></iframe>
       </section>


         <section>
            <h4 style="font-size:30px;">Video: Stanford Seminar - I â™¥ Logs: Apache Kafka, Stream Processing, and Real-time Data </h4>
              <iframe height="450" width="800" data-src="https://www.youtube.com/embed/SU8LaHLh6Ng?autoplay=0"></iframe>
        </section>


        <section>
           <h4 style="font-size:30px;">Video: ACM: Putting Apache Kafka to Use for Event Streams, Jay Kreps </h4>
             <iframe height="450" width="800" data-src="https://www.youtube.com/embed/el-SqcZLZlI?autoplay=0"></iframe>
       </section>




        <section>
          <h4>Setup - Starting ZooKeeper Server</h4>
              <img style="border:0px" src="img/kafka/kafka-zookeepr-config.png" alt="kafka-zookeepr-config">
              <img style="border:0px" height="80" src="img/kafka/kafka-zookeeper-starting.png" alt="zookeeper start server">
        </section>


        <section>
          <h4>Setup -  Kafka Server Config</h4>
              <img style="border:0px" height="500" src="img/kafka/kafka-server-config.png" alt="kafka-server-config">
        </section>

        <section>
          <h4>Setup -  Kafka Server Starting</h4>
              <img style="border:0px" src="img/kafka/kafka-start-server.png" alt="Kafka start server">
              <img style="border:0px" src="img/kafka/kafka-start-server-2.png" alt="Kafka start server">
        </section>

        <section>
          <h4 style="font-size:30px;">Simple Demo - Producer on left and Consumer on right</h4>
              <img style="border:0px" height="500" src="img/kafka/kafka-1.gif" alt="Kafka Demo">
        </section>

        <section>
          <h4>Advantages of Message based async integration</h4>
          <img style="border:0px" height="500" src="img/kafka/adv-disadv-1.png" alt="">

        </section>


        <section>
          <h4 style="font-size:30px;">Key Ideas - Data/Journal Logs - programmatic access</h4>
          <ul style="font-size:30px;">
            <li> Write-ahead logs or commit logs or transaction logs </li>
            <li>Logs are heart of many distributed data systems, data integration and real-time application architectures.</li>
            <li>Append-only, totally-ordered sequence of records ordered by time</li>
            <li>Records what happened and when.</li>
            <li>The ordering of records defines a notion of "time" since entries to the left are defined to be older then entries to the right.</li>
            <li>The log entry number can be thought of as the "timestamp" of the entry.</li>
            <li>database uses a log to write out information about the records they will be modifying,
              before applying the changes to all the various data structures it maintains. </li>

            <li>Since the log is immediately persisted it is used as the authoritative source in
               restoring all other persistent structures in the event of a crash.</li>
            <li>The use of logs as a mechanism for data subscription seems to have arisen almost by chance -
            supporting messaging, data flow, and real-time data processing</li>
            <li>The two problems a log solves: ordering changes and distributing data</li>
          </ul>
        </section>

        <section>
          <h4>Key Ideas - Logs - contd.</h4>
          <ul style="font-size:30px;">

            <li>If you feed two deterministic pieces of code the same input log, they will produce the same output.</li>
            <li>You can reduce the problem of making multiple machines all do
              the same thing to the problem of implementing a distributed consistent log to feed these processes input.</li>
              <li> Time-stamps that index the log now act as the clock for the state of the replicas</li>
          </ul>
        </section>

        <section>
          <h4>References</h4>

          <ul>
            <li>
              <a target="_blank" href="https://www.salesforce.com/video/302281/">
                How We Built Heroku's Real-Time Platform Event Stream
              </a>
            </li>


            <li>
              <a target="_blank" href="https://engineering.linkedin.com/distributed-systems/log-what-every-software-engineer-should-know-about-real-time-datas-unifying">
The Log              </a>
            </li>


            <li>
              <a target="_blank" href="https://people.eecs.berkeley.edu/~brewer/cs262/SystemR.pdf">
                A History and Evaluation of System R
              </a>
            </li>
          </ul>
        </section>





    </div>
  </div>



  <script src="../reveal.js/lib/js/head.min.js"></script>
  <script src="../reveal.js/js/reveal.js"></script>


  <script>
    'use strict';


    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({

      //width: 960,
      //	height: 700,

      // Display presentation control arrows
      controls: true,

      // Help the user learn the controls by providing hints, for example by
      // bouncing the down arrow when they first encounter a vertical slide
      controlsTutorial: true,

      // Determines where controls appear, "edges" or "bottom-right"
      controlsLayout: 'edges',

      // Visibility rule for backwards navigation arrows; "faded", "hidden"
      // or "visible"
      controlsBackArrows: 'faded',
      // Display a presentation progress bar
      progress: true,

      // Set default timing of 2 minutes per slide
      defaultTiming: 120,

      // Enable keyboard shortcuts for navigation
      keyboard: true,


      history: true,
      center: true,
      slideNumber: true,

      embedded: true,

      transition: 'convex', // none/fade/slide/convex/concave/zoom

      menu: {
        markers: true,
        openSlideNumber: true,
        themes: [{
            name: 'Black',
            theme: '../reveal.js/css/theme/black.css'
          },
          {
            name: 'White',
            theme: '../reveal.js/css/theme/white.css'
          },
          {
            name: 'League',
            theme: '../reveal.js/css/theme/league.css'
          },
          {
            name: 'Sky',
            theme: '../reveal.js/css/theme/sky.css'
          },
          {
            name: 'Beige',
            theme: '../reveal.js/css/theme/beige.css'
          },
          {
            name: 'Simple',
            theme: '../reveal.js/css/theme/simple.css'
          },
          {
            name: 'Serif',
            theme: '../reveal.js/css/theme/serif.css'
          },
          {
            name: 'Blood',
            theme: '../reveal.js/css/theme/blood.css'
          },
          {
            name: 'Night',
            theme: '../reveal.js/css/theme/night.css'
          },
          {
            name: 'Moon',
            theme: '../reveal.js/css/theme/moon.css'
          },
          {
            name: 'Solarized',
            theme: '../reveal.js/css/theme/solarized.css'
          }
        ],
        custom: []
      },

      // Optional reveal.js plugins
      dependencies: [{
          src: '../reveal.js/lib/js/classList.js',
          condition: function() {
            return !document.body.classList;
          }
        },
        {
          src: '../reveal.js/plugin/markdown/marked.js',
          condition: function() {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: '../reveal.js/plugin/markdown/markdown.js',
          condition: function() {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: '../reveal.js/plugin/highlight/highlight.js',
          async: true,
          condition: function() {
            return !!document.querySelector('pre code');
          },
          callback: function() {
            hljs.initHighlightingOnLoad();
          }
        },
        {
          src: '../reveal.js/plugin/zoom-js/zoom.js',
          async: true
        },
        {
          src: '../reveal.js/plugin/notes/notes.js',
          async: true
        },
        {
          src: '../reveal.js/plugin/reveal.js-menu/menu.js',
          async: true
        }
      ]
    });



    var app = angular.module('app', [
      'hc.marked'
    ]);
    app.config(['markedProvider', function(markedProvider) {
      markedProvider.setOptions({
        gfm: true
      });
    }]);

    var GSCOPE;
    app.controller('MainCtrl', function($scope, $http, $timeout) {
      GSCOPE = $scope; // debugging purposes
      $scope.appName="Apache Kafka";



    })
  </script>
</body>

</html>
