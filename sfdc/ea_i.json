{
  "Extract_PricebookEntry": {
    "action": "sfdcDigest",
    "parameters": {
      "SFDCtoken": "SFDCtoken",
      "maxAllowedOffset": 1500,
      "fields": [{
        "name": "Id"
      }, {
        "name": "Product2Id"
      }],
      "concurrentBatches": 12,
      "object": "PricebookEntry"
    }
  },
  "Join_OpportunityLineItemPricebookEntry": {
    "action": "augment",
    "parameters": {
      "right_key": ["Id"],
      "left_key": ["PricebookEntryId"],
      "left": "Extract_OpportunityLineItem",
      "right_select": ["Product2Id"],
      "right": "Extract_PricebookEntry",
      "relationship": "Pricebook"
    }
  },
  "Extract_Opportunity": {
    "action": "sfdcDigest",
    "parameters": {
      "SFDCtoken": "SFDCtoken",
      "maxAllowedOffset": 1500,
      "fields": [{
        "name": "Id"
      }, {
        "name": "AccountId"
      }, {
        "name": "OwnerId"
      }, {
        "name": "Name"
      }, {
        "name": "StageName"
      }, {
        "name": "LeadSource"
      }, {
        "name": "IsWon"
      }, {
        "name": "Type"
      }, {
        "name": "IsClosed"
      }, {
        "name": "ForecastCategory"
      }, {
        "name": "ForecastCategoryName"
      }, {
        "name": "CreatedDate"
      }, {
        "name": "CloseDate"
      }, {
        "name": "Amount"
      }, {
        "name": "CreatedById"
      }],
      "concurrentBatches": 12,
      "object": "Opportunity"
    }
  },
  "Join_AccountOwner": {
    "action": "augment",
    "parameters": {
      "right_key": ["Id"],
      "left_key": ["OwnerId"],
      "left": "Extract_Account",
      "right_select": ["Name", "Username"],
      "right": "Extract_User",
      "relationship": "Owner",
      "operation": "LookupMultiValue"
    }
  },
  "Extract_Product": {
    "action": "sfdcDigest",
    "parameters": {
      "SFDCtoken": "SFDCtoken",
      "maxAllowedOffset": 1500,
      "fields": [{
        "name": "Id"
      }, {
        "name": "ProductCode"
      }, {
        "name": "Name"
      }, {
        "name": "Family"
      }],
      "concurrentBatches": 12,
      "object": "Product2"
    }
  },
  "Extract_Account": {
    "action": "sfdcDigest",
    "parameters": {
      "SFDCtoken": "SFDCtoken",
      "fields": [{
        "name": "Id"
      }, {
        "name": "Name"
      }, {
        "name": "OwnerId"
      }, {
        "name": "AccountSource"
      }, {
        "name": "Type"
      }, {
        "name": "Industry"
      }, {
        "name": "BillingCountry"
      }, {
        "name": "BillingState"
      }, {
        "name": "CreatedDate"
      }, {
        "name": "LastModifiedDate"
      }],
      "object": "Account"
    }
  },
  "Extract_User": {
    "action": "sfdcDigest",
    "parameters": {
      "SFDCtoken": "SFDCtoken",
      "chunkSize": 1500,
      "maxAllowedOffset": 1500,
      "fields": [{
        "name": "Id"
      }, {
        "name": "Username"
      }, {
        "name": "Name"
      }, {
        "name": "UserRoleId"
      }, {
        "name": "ManagerId"
      }],
      "concurrentBatches": 12,
      "object": "User"
    }
  },
  "Extract_OpportunityLineItem": {
    "action": "sfdcDigest",
    "parameters": {
      "SFDCtoken": "SFDCtoken",
      "maxAllowedOffset": 1500,
      "fields": [{
        "name": "OpportunityId"
      }, {
        "name": "ProductCode"
      }, {
        "name": "ListPrice"
      }, {
        "name": "Quantity"
      }, {
        "name": "TotalPrice"
      }, {
        "name": "PricebookEntryId"
      }],
      "concurrentBatches": 12,
      "object": "OpportunityLineItem"
    }
  },
  "Join_OpportunityOpportunityLineItemPricebookEntryProduct": {
    "action": "augment",
    "parameters": {
      "right_key": ["Id"],
      "left_key": ["OpportunityId"],
      "left": "Join_OpportunityLineItemPricebookEntryProduct",
      "right_select": ["Name", "StageName", "CloseDate", "IsWon", "Type", "IsClosed", "LeadSource", "ForecastCategory", "ForecastCategoryName", "CreatedDate", "AccountId", "Account.Name", "Account.OwnerId", "Account.Type", "Account.Industry", "Account.BillingCountry", "Account.BillingState", "Account.AccountSource", "Account.Owner.Name", "OwnerId", "Owner.Name"],
      "right": "Join_OpportunityOwner",
      "relationship": "Opportunity"
    }
  },
  "Join_OpportunityOwner": {
    "action": "augment",
    "parameters": {
      "right_key": ["Id"],
      "left_key": ["OwnerId"],
      "left": "Join_OpportunityAccount",
      "right_select": ["Name", "Username"],
      "right": "Extract_User",
      "relationship": "Owner",
      "operation": "LookupMultiValue"
    }
  },
  "Join_OpportunityLineItemPricebookEntryProduct": {
    "action": "augment",
    "parameters": {
      "right_key": ["Id"],
      "left_key": ["Pricebook.Product2Id"],
      "left": "Join_OpportunityLineItemPricebookEntry",
      "right_select": ["ProductCode", "Name", "Family"],
      "right": "Extract_Product",
      "relationship": "Product"
    }
  },
  "Register_OpportunityProducts": {
    "action": "sfdcRegister",
    "parameters": {
      "SFDCtoken": "SFDCtoken",
      "rowLevelSecurityFilter": "",
      "name": "Products Opportunities",
      "alias": "products_opportunities",
      "source": "Join_OpportunityOpportunityLineItemPricebookEntryProduct"
    }
  },
  "Register_Opportunity": {
    "action": "sfdcRegister",
    "parameters": {
      "SFDCtoken": "SFDCtoken",
      "rowLevelSecurityFilter": "",
      "name": "Opportunities",
      "alias": "opportunities",
      "source": "Join_OpportunityOwner"
    }
  },
  "Join_OpportunityAccount": {
    "action": "augment",
    "parameters": {
      "right_key": ["Id"],
      "left_key": ["AccountId"],
      "left": "Extract_Opportunity",
      "right_select": ["Name", "Type", "Industry", "BillingCountry", "BillingState", "AccountSource", "OwnerId", "Owner.Name"],
      "right": "Join_AccountOwner",
      "relationship": "Account",
      "operation": "LookupMultiValue"
    }
  }
}
