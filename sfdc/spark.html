<!DOCTYPE html>
<html lang="en" ng-app="app" ng-controller="MainCtrl">

<head>
  <meta charset="UTF-8">
  <title>{{appName}}</title>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="../css/navbar-green.css">
  <script src="../js/angular.min.js"></script>
  <script src="../js/data-markdown.user.js"></script>


  <script src="../bower_components/marked/marked.min.js"></script>
  <script src="../bower_components/angular-marked/dist/angular-marked.js"></script>

  <link rel="stylesheet" href="../reveal.js/css/reveal.css">
  <link rel="stylesheet" href="../reveal.js/css/theme/white.css" id="theme">

  <!-- Code syntax highlighting -->
  <link rel="stylesheet" href="../reveal.js/lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? '../reveal.js/css/print/pdf.css' : '../reveal.js/css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>

  <!--[if lt IE 9]>
    		<script src="../reveal.js/lib/js/html5shiv.js"></script>
    		<![endif]-->

  <style>
    .reveal .slide-number {
      font-size: 0.5em;
    }

    .simg {
      border-radius: 10px;
      border: 1px;
    }

    .reveal section ul li,
    .reveal section p {
      font-size: .8em !important;
    }

    .reveal section pre code {
      font-size: 0.7em !important;
    }
    pre {
      font-size: 13px;
    }
  </style>


</head>

<body>


  <nav class="navbar navbar-default" role="navigation">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="javascript:void(0)">{{appName}}</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#/home">Home</a></li>
      </ul>
      <ul class="nav navbar-nav">
        <li ><a href="/">Main</a></li>
      </ul>

      <div class="inner-addon right-addon navbar-form navbar-right">
        <i class="glyphicon glyphicon-search"></i>
        <input type="text" class="form-control" placeholder="Search" />
      </div>

      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown ">
          <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Help <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="./help.html">Help Topics</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <!-- /.navbar-collapse -->
  </nav>
  <!--
  <div class="container" ng-controller='MainCtrl'>
    <div marked src="'pevents.md'"></div>
  </div>
-->


  <div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

      <section id="home">
        <h4>{{appName}}</h4>
       </section>

       <section>
         <h4>What is Apache Spark?</h4>
         <ul>
           <li>Distributed General Purpose, Lightning-fast Cluster Computing Framework with:
             <ul>
                <li>In-Memory data processing engine</li>
                <li>ETL</li>
                <li>SQL and Dataframes</li>
                <li>Analytics</li>
                <li>Machine Learning (MLlib)</li>
                <li>Graph Processing on large data
                 <ul>
                   <li>At Rest (batch)</li>
                   <li>In Motion (streaming)</li>
                 </ul>
                </li>
             </ul>
             <img style="border:0px;" height="180" src="https://spark.apache.org/images/spark-stack.png" alt="">

           </li>


         </ul>
       </section>

       <section>
         <h4>Runs Everywhere</h4>
         <ul>
           <li>Hadoop Yarn</li>
           <li>Apache Mesos</li>
           <li>Standalone Cluster Mode</li>
           <li>Cloud</li>
           <li>EC2</li>
         </ul>
       </section>

       <section>
         <h4>Access Diverse Data Source including:</h4>
         <ul>
           <li>HDFS</li>
           <li>Cassnadra</li>
           <li>HBase</li>
           <li>Hive</li>
           <li>Tachyon</li>
           <li>S3</li>
         </ul>
       </section>

       <section>
         <h4>Ease of Use, Apps can be written in</h4>
         <ul>
           <li>Has 80 high-level operators that makes to build <b>parallel apps</b> easy using:
          <ul>
           <li>Java</li>
           <li>Scala</li>
           <li>Python</li>
           <li>R</li>
         </li>
         </ul>

       </section>

       <section>
         <h4>PI calculation sample code</h4>
         <pre style="font-size: 13px;">
$ cat pi.scala
val NUM_SAMPLES = 100000

val count = sc.parallelize(1 to NUM_SAMPLES).filter { _ =>
val x = math.random
val y = math.random
x*x + y*y < 1
}.count()
println(s"Pi is roughly ${4.0 * count / NUM_SAMPLES}")

// running:

scala> :load pi.scala
Loading pi.scala...
NUM_SAMPLES: Int = 100000
count: Long = 78560
Pi is roughly 3.1424


         </pre>
       </section>

<section>
  <h4>File chars length example</h4>
 <pre style="font-size:14px;">


scala> val textFile = sc.textFile("/Users/mchinnappan/text-docs/t8.shakespeare.txt")
textFile: org.apache.spark.rdd.RDD[String] = /Users/mchinnappan/text-docs/t8.shakespeare.txt MapPartitionsRDD[16] at textFile at <console>:24

scala> val lineLengths = textFile.map(s => s.length)
lineLengths: org.apache.spark.rdd.RDD[Int] = MapPartitionsRDD[17] at map at <console>:26

scala> val totalLength = lineLengths.reduce(_ + _)
totalLength: Int = 5333743
 </pre>
</section>

<section>
  <h4>Spark Dataframe</h4>

 <pre style="font-size:14px;">
scala> import org.apache.spark.sql.SparkSession
import org.apache.spark.sql.SparkSession

scala> val spark = SparkSession.builder().appName("Spark SQL").getOrCreate()
18/02/06 14:55:07 WARN SparkSession$Builder: Using an existing SparkSession; some configuration may not take effect.
spark: org.apache.spark.sql.SparkSession = org.apache.spark.sql.SparkSession@1a1c308b

scala> import spark.implicits._
import spark.implicits._

scala> val df = spark.read.json("/Users/mchinnappan/text-docs/people.json")
df: org.apache.spark.sql.DataFrame = [age: bigint, name: string]

scala> df.show()
+---+--------------+
|age|          name|
+---+--------------+
| 76|  Ken Thompson|
| 76|Dennis Ritchie|
| 62| James Gosling|
| 83| Niklaus Wirth|
| 63|      Bill Joy|
+---+--------------+
</pre>

</section>

<section>
  <h4>Spark Dataframe - Contd.</h4>

 <pre style="font-size:14px;">

scala> df.printSchema()
root
 |-- age: long (nullable = true)
 |-- name: string (nullable = true)


scala> df.select("name").show()
+--------------+
|          name|
+--------------+
|  Ken Thompson|
|Dennis Ritchie|
| James Gosling|
| Niklaus Wirth|
|      Bill Joy|
+--------------+
</pre>
</section>


<section>
  <h4>Spark Dataframe - Contd.</h4>

 <pre style="font-size:14px;">

scala> // Select everybody, but increment the age by 1

scala> df.select($"name", $"age" + 1).show()
+--------------+---------+
|          name|(age + 1)|
+--------------+---------+
|  Ken Thompson|       76|
|Dennis Ritchie|       76|
| James Gosling|       63|
| Niklaus Wirth|       84|
|      Bill Joy|       64|
+--------------+---------+

scala> // Select people older than 70

scala> df.filter($"age" > 70).show()
+---+--------------+
|age|          name|
+---+--------------+
| 76|  Ken Thompson|
| 76|Dennis Ritchie|
| 83| Niklaus Wirth|
+---+--------------+



</pre>
</section>

<section>
  <h4>Spark Dataframe - Contd.</h4>

 <pre style="font-size:14px;">

   scala> // Count people by age

   scala> df.groupBy("age").count().show()
   +---+-----+
   |age|count|
   +---+-----+
   | 63|    1|
   | 83|    1|
   | 62|    1|
   | 76|    2|
   +---+-----+
 </pre>
</section>


<section>
  <h4>SQL Query</h4>
<pre style="font-size:14px;">

scala> // Register the DataFrame as a SQL temporary view
scala> df.createOrReplaceTempView("people")
scala> val sqlDF = spark.sql("SELECT * FROM people")
sqlDF: org.apache.spark.sql.DataFrame = [age: bigint, name: string]

scala> sqlDF.show()
+---+--------------+
|age|          name|
+---+--------------+
| 76|  Ken Thompson|
| 76|Dennis Ritchie|
| 62| James Gosling|
| 83| Niklaus Wirth|
| 63|      Bill Joy|
+---+--------------+
</pre>

</section>

<section>
  <h4>Datasets</h4>
<pre style="font-size:14px;">


scala> case class Person(name: String, age: Long)
defined class Person

scala> val caseClassDS = Seq(Person("Ken Thompson", 76)).toDS()
caseClassDS: org.apache.spark.sql.Dataset[Person] = [name: string, age: bigint]

scala> caseClassDS.show()
+------------+---+
|        name|age|
+------------+---+
|Ken Thompson| 76|
+------------+---+
  </pre>
</section>


<section>
  <h4>Datasets - contd.</h4>
<pre style="font-size:14px;">
  scala> val jsonPath = "/Users/mchinnappan/text-docs/people.json"
  jsonPath: String = /Users/mchinnappan/text-docs/people.json

  scala> val peopleDS = spark.read.json(jsonPath).as[Person]
  peopleDS: org.apache.spark.sql.Dataset[Person] = [age: bigint, name: string]

  scala> peopleDS.show()
  +---+--------------+
  |age|          name|
  +---+--------------+
  | 76|  Ken Thompson|
  | 76|Dennis Ritchie|
  | 62| James Gosling|
  | 83| Niklaus Wirth|
  | 63|      Bill Joy|
  +---+--------------+
</pre>
</section>

    </div>
  </div>





  <script src="../reveal.js/lib/js/head.min.js"></script>
  <script src="../reveal.js/js/reveal.js"></script>


  <script>
    'use strict';


    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({

      //width: 960,
      //	height: 700,

      // Display presentation control arrows
      controls: true,

      // Help the user learn the controls by providing hints, for example by
      // bouncing the down arrow when they first encounter a vertical slide
      controlsTutorial: true,

      // Determines where controls appear, "edges" or "bottom-right"
      controlsLayout: 'edges',

      // Visibility rule for backwards navigation arrows; "faded", "hidden"
      // or "visible"
      controlsBackArrows: 'faded',
      // Display a presentation progress bar
      progress: true,

      // Set default timing of 2 minutes per slide
      defaultTiming: 120,

      // Enable keyboard shortcuts for navigation
      keyboard: true,


      history: true,
      center: true,
      slideNumber: true,

      embedded: true,

      transition: 'convex', // none/fade/slide/convex/concave/zoom

      menu: {
        markers: true,
        openSlideNumber: true,
        themes: [{
            name: 'Black',
            theme: '../reveal.js/css/theme/black.css'
          },
          {
            name: 'White',
            theme: '../reveal.js/css/theme/white.css'
          },
          {
            name: 'League',
            theme: '../reveal.js/css/theme/league.css'
          },
          {
            name: 'Sky',
            theme: '../reveal.js/css/theme/sky.css'
          },
          {
            name: 'Beige',
            theme: '../reveal.js/css/theme/beige.css'
          },
          {
            name: 'Simple',
            theme: '../reveal.js/css/theme/simple.css'
          },
          {
            name: 'Serif',
            theme: '../reveal.js/css/theme/serif.css'
          },
          {
            name: 'Blood',
            theme: '../reveal.js/css/theme/blood.css'
          },
          {
            name: 'Night',
            theme: '../reveal.js/css/theme/night.css'
          },
          {
            name: 'Moon',
            theme: '../reveal.js/css/theme/moon.css'
          },
          {
            name: 'Solarized',
            theme: '../reveal.js/css/theme/solarized.css'
          }
        ],
        custom: []
      },

      // Optional reveal.js plugins
      dependencies: [{
          src: '../reveal.js/lib/js/classList.js',
          condition: function() {
            return !document.body.classList;
          }
        },
        {
          src: '../reveal.js/plugin/markdown/marked.js',
          condition: function() {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: '../reveal.js/plugin/markdown/markdown.js',
          condition: function() {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: '../reveal.js/plugin/highlight/highlight.js',
          async: true,
          condition: function() {
            return !!document.querySelector('pre code');
          },
          callback: function() {
            hljs.initHighlightingOnLoad();
          }
        },
        {
          src: '../reveal.js/plugin/zoom-js/zoom.js',
          async: true
        },
        {
          src: '../reveal.js/plugin/notes/notes.js',
          async: true
        },
        {
          src: '../reveal.js/plugin/reveal.js-menu/menu.js',
          async: true
        }
      ]
    });



    var app = angular.module('app', [
      'hc.marked'
    ]);
    app.config(['markedProvider', function(markedProvider) {
      markedProvider.setOptions({
        gfm: true
      });
    }]);

    var GSCOPE;
    app.controller('MainCtrl', function($scope, $http, $timeout) {
      GSCOPE = $scope; // debugging purposes
      $scope.appName="Apache Spark";



    })
  </script>
</body>

</html>
